# test-7-git-batches

优化代码：
分析上面代码，罗列隐藏问题
针对刚刚提出的3个严重问题，分别列出解决方案，并输出完整代码

增加一个测试函数，在跑完process_input_paths后，对每个分组都进行如下的操作：
每个路径前后加个双引号，用英文空格拼接到字符串"git add"后面形成新的字符串，当长度超过30000后当成命令去用系统方式执行，继续拼接和执行，直到所有路径都用完后，执行git commit -F commit-info.txt，再执行git push
commit-info.txt为exe命令的第一个参数

看看readme.md修改能不能识别到

对所有分组的所有大文件进行拆分，并把大文件备份一下：
大文件文件名如a-name.bin
在大文件所在目录下创建.gitignore文件，把大文件不带拓展名的文件名+"-merged."+大文件拓展名字符串（如a-name-merged.bin）加到.gitignore文件里去，并把.gitignore文件加入到文件分组中去。
在大文件所在目录下创建文件夹，命名为大文件文件名+"-split"后缀（如a-name.bin-split），把这个文件夹加入到文件分组中去，里面放所有子文件，
每个子文件命名为大文件文件名+"-part0001"后缀（如a-name.bin-part0001），大小最大为MAX_FILE_SIZE，
把大文件备份到新的地址，新地址在大文件所在绝对路径的基础上，只在git仓库所在目录文件夹名的基础上+"-backup"（如大文件绝对路径为E:\test-7-git-batches-large-repo\a\b4\c0000\d0000.bin的git仓库目录路径是E:\test-7-git-batches-large-repo，则把它复制到E:\test-7-git-batches-large-repo-backup\a\b4\c0000\d0000.bin）
输出完整代码后检查整个代码是否完全满足上面的需求，如不满足则自行修改，直到全都满足为止后停止修改，并输出完整代码

<!-- # 增加拆分大文件并备份的需求 -->
<!--  -->
<!-- process_input_paths时不跳过大文件，返回的结构体里增加一个数组用来放它们。 -->
<!--  -->
<!-- 如果存在大文件，则判断是否需要拆分成每个50M大小的文件，并备份原文件，把原文件名增加到当前目录的git忽略列表里。 -->
<!--  -->
<!-- 拆分规则如下： -->
<!--  -->
<!-- 在同目录下创建目录，命名为原文件名+"-split" -->
<!-- 把拆分的小文件放到该目录下 -->
<!--  -->
<!-- 需要拆分的条件如下： -->
<!-- 大文件所在目录存在原文件名+"-split"的文件夹 -->
<!-- 且文件夹下所有文件的总大小和大文件的大小不相同 -->
<!--  -->
<!-- 备份规则如下： -->
<!--  -->
<!-- 把大文件备份到新的地址，新地址在大文件所在绝对路径的基础上， -->
<!-- 只在git仓库所在目录文件夹名的基础上+"-backup"（如大文件绝对路径为E:\test-7-git-batches-large-repo\a\b4\c0000\d0000.bin的git仓库目录路径是E:\test-7-git-batches-large-repo，则把它复制到E:\test-7-git-batches-large-repo-backup\a\b4\c0000\d0000.bin） -->
<!--  -->
<!-- 忽略规则如下： -->
<!--  -->
<!-- 在大文件所在目录下创建.gitignore文件（不存在的情况下） -->
<!-- 把大文件不带拓展名的文件名+"-merged."+大文件拓展名字符串（如file.bin->file-merged.bin）加到.gitignore文件里去 -->
<!--  -->
<!-- 如果存在大文件，而且存在判断需要拆分的，则重新调用一下process_input_paths，再去往下跑 -->
<!-- 如果不存在大文件，或者大文件都不需要拆分，则直接往下跑 -->
<!--  -->
<!-- 输出修改后的完整代码 -->

# 增加拆分大文件并备份的需求

process_input_paths返回的结构体里，增加跳过的大文件数组，返回后打印大文件信息
需要修改的函数完整输出出来

print_skipped_files时，每打印一个大文件路径，就把这个大文件备份一下：
复制到新的路径，复制规则如下：
如果大文件路径为E:\test-6-git-batches\中a\空 尾b1\大 文c20000\d0000.bin，
它所在git仓库路径为E:\test-6-git-batches
则新路径为E:\test-6-git-batches-backup\中a\空 尾b1\大 文c20000\d0000.bin
需要修改的函数完整输出出来
